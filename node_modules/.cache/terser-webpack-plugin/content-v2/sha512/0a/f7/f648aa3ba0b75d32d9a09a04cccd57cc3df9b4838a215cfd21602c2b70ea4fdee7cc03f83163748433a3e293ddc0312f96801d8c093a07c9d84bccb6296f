{"code":"!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e(require(\"stimulus\")):\"function\"==typeof define&&define.amd?define([\"stimulus\"],e):\"object\"==typeof exports?exports[\"skrw-js\"]=e(require(\"stimulus\")):t[\"skrw-js\"]=e(t[void 0])}(window,function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=10)}([function(e,i){e.exports=t},function(t,e,i){var n,s,a;\n/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/s=[t,e],void 0===(a=\"function\"==typeof(n=function(t,e){\"use strict\";var i,n,s=\"function\"==typeof Map?new Map:(i=[],n=[],{has:function(t){return i.indexOf(t)>-1},get:function(t){return n[i.indexOf(t)]},set:function(t,e){-1===i.indexOf(t)&&(i.push(t),n.push(e))},delete:function(t){var e=i.indexOf(t);e>-1&&(i.splice(e,1),n.splice(e,1))}}),a=function(t){return new Event(t,{bubbles:!0})};try{new Event(\"test\")}catch(t){a=function(t){var e=document.createEvent(\"Event\");return e.initEvent(t,!0,!1),e}}function o(t){if(t&&t.nodeName&&\"TEXTAREA\"===t.nodeName&&!s.has(t)){var e,i=null,n=null,o=null,r=function(){t.clientWidth!==n&&d()},l=function(e){window.removeEventListener(\"resize\",r,!1),t.removeEventListener(\"input\",d,!1),t.removeEventListener(\"keyup\",d,!1),t.removeEventListener(\"autosize:destroy\",l,!1),t.removeEventListener(\"autosize:update\",d,!1),Object.keys(e).forEach(function(i){t.style[i]=e[i]}),s.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener(\"autosize:destroy\",l,!1),\"onpropertychange\"in t&&\"oninput\"in t&&t.addEventListener(\"keyup\",d,!1),window.addEventListener(\"resize\",r,!1),t.addEventListener(\"input\",d,!1),t.addEventListener(\"autosize:update\",d,!1),t.style.overflowX=\"hidden\",t.style.wordWrap=\"break-word\",s.set(t,{destroy:l,update:d}),\"vertical\"===(e=window.getComputedStyle(t,null)).resize?t.style.resize=\"none\":\"both\"===e.resize&&(t.style.resize=\"horizontal\"),i=\"content-box\"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(i)&&(i=0),d()}function c(e){var i=t.style.width;t.style.width=\"0px\",t.offsetWidth,t.style.width=i,t.style.overflowY=e}function u(){if(0!==t.scrollHeight){var e=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(t),s=document.documentElement&&document.documentElement.scrollTop;t.style.height=\"\",t.style.height=t.scrollHeight+i+\"px\",n=t.clientWidth,e.forEach(function(t){t.node.scrollTop=t.scrollTop}),s&&(document.documentElement.scrollTop=s)}}function d(){u();var e=Math.round(parseFloat(t.style.height)),i=window.getComputedStyle(t,null),n=\"content-box\"===i.boxSizing?Math.round(parseFloat(i.height)):t.offsetHeight;if(n<e?\"hidden\"===i.overflowY&&(c(\"scroll\"),u(),n=\"content-box\"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):\"hidden\"!==i.overflowY&&(c(\"hidden\"),u(),n=\"content-box\"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),o!==n){o=n;var s=a(\"autosize:resized\");try{t.dispatchEvent(s)}catch(t){}}}}function r(t){var e=s.get(t);e&&e.destroy()}function l(t){var e=s.get(t);e&&e.update()}var c=null;\"undefined\"==typeof window||\"function\"!=typeof window.getComputedStyle?((c=function(t){return t}).destroy=function(t){return t},c.update=function(t){return t}):((c=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return o(t)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],r),t},c.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],l),t}),e.default=c,t.exports=e.default})?n.apply(e,s):n)||(t.exports=a)},function(t,e,i){var n,s,a;s=[],void 0===(a=\"function\"==typeof(n=function(){\"use strict\";function t(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||\"[object Arguments]\"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function e(t,e){var i=Object.keys(t);return Object.getOwnPropertySymbols&&i.push.apply(i,Object.getOwnPropertySymbols(t)),e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i}function i(t){for(var i=1;i<arguments.length;i++)if(i%2){var s=null!=arguments[i]?arguments[i]:{};e(s,!0).forEach(function(e){n(t,e,s[e])})}else Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(arguments[i])):e(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(arguments[i],e))});return t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){if(!t)return console.warn(\"Tagify: \",\"invalid input element \",t),this;this.applySettings(t,e),this.state={},this.value=[],this.listeners={},this.DOM={},this.extend(this,new this.EventDispatcher(this)),this.build(t),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),t.autofocus&&this.DOM.input.focus()}return s.prototype={isIE:window.document.documentMode,TEXTS:{empty:\"empty\",exceed:\"number of tags exceeded\",pattern:\"pattern mismatch\",duplicate:\"already exists\",notAllowed:\"not allowed\"},DEFAULTS:{delimiters:\",\",pattern:null,maxTags:1/0,callbacks:{},addTagOnBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,keepInvalidTags:!1,autoComplete:!0,mixTagsAllowedAfter:/,|\\.|\\:|\\s/,backspace:!0,skipInvalid:!1,transformTag:function(){},dropdown:{classname:\"\",enabled:2,maxItems:10,itemTemplate:\"\",fuzzySearch:!0}},templates:{wrapper:function(t,e){return'<tags class=\"tagify '.concat(e.mode?\"tagify--mix\":\"\",\" \").concat(t.className,'\"\\n                          ').concat(e.readonly?'readonly aria-readonly=\"true\"':'aria-haspopup=\"true\" aria-expanded=\"false\"','\\n                          role=\"tagslist\">\\n                <span contenteditable data-placeholder=\"').concat(t.placeholder||\"&#8203;\",'\" aria-placeholder=\"').concat(t.placeholder||\"\",'\"\\n                      class=\"tagify__input\"\\n                      role=\"textbox\"\\n                      aria-multiline=\"false\"></span>\\n            </tags>')},tag:function(t,e){return\"<tag title='\".concat(e.title||t,\"'\\n                         contenteditable='false'\\n                         spellcheck='false'\\n                         class='tagify__tag \").concat(e.class?e.class:\"\",\"'\\n                         \").concat(this.getAttributes(e),\">\\n                <x title='' class='tagify__tag__removeBtn' role='button' aria-label='remove tag'></x>\\n                <div>\\n                    <span class='tagify__tag-text'>\").concat(t,\"</span>\\n                </div>\\n            </tag>\")},dropdownItem:function(t){var e=(t.value||t).replace(/`|'/g,\"&#39;\");return\"<div \".concat(this.getAttributes(t),\"\\n                         class='tagify__dropdown__item \").concat(t.class?t.class:\"\",'\\'\\n                         tabindex=\"0\"\\n                         role=\"menuitem\"\\n                         aria-labelledby=\"dropdown-label\">').concat(e,\"</div>\")}},customEventsList:[\"click\",\"add\",\"remove\",\"invalid\",\"input\",\"edit\"],applySettings:function(t,e){var i=t.getAttribute(\"data-whitelist\"),n=t.getAttribute(\"data-blacklist\");if(this.DEFAULTS.templates=this.templates,this.DEFAULTS.dropdown.itemTemplate=this.templates.dropdownItem,this.settings=this.extend({},this.DEFAULTS,e),this.settings.readonly=t.hasAttribute(\"readonly\"),this.isIE&&(this.settings.autoComplete=!1),n&&(n=n.split(this.settings.delimiters))instanceof Array&&(this.settings.blacklist=n),i&&(i=i.split(this.settings.delimiters))instanceof Array&&(this.settings.whitelist=i),t.pattern)try{this.settings.pattern=new RegExp(t.pattern)}catch(t){}if(this.settings&&this.settings.delimiters)try{this.settings.delimiters=new RegExp(this.settings.delimiters,\"g\")}catch(t){}},parseHTML:function(t){return(new DOMParser).parseFromString(t.trim(),\"text/html\").body.firstElementChild},escapeHTML:function(t){var e=document.createTextNode(t),i=document.createElement(\"p\");return i.appendChild(e),i.innerHTML},build:function(t){var e=this.DOM,i=this.settings.templates.wrapper(t,this.settings);e.originalInput=t,e.scope=this.parseHTML(i),e.input=e.scope.querySelector(\"[contenteditable]\"),t.parentNode.insertBefore(e.scope,t),0<=this.settings.dropdown.enabled&&this.dropdown.init.call(this)},destroy:function(){this.DOM.scope.parentNode.removeChild(this.DOM.scope),this.dropdown.hide.call(this,!0)},loadOriginalValues:function(t){var e=0<arguments.length&&void 0!==t?t:this.DOM.originalInput.value;if(e){this.removeAllTags();try{e=JSON.parse(e)}catch(t){}\"mix\"==this.settings.mode?this.parseMixTags(e):this.addTags(e).forEach(function(t){t&&t.classList.add(\"tagify--noAnim\")})}},extend:function(t,e,i){function n(t){var e=Object.prototype.toString.call(t).split(\" \")[1].slice(0,-1);return t===Object(t)&&\"Array\"!=e&&\"Function\"!=e&&\"RegExp\"!=e&&\"HTMLUnknownElement\"!=e}function s(t,e){for(var i in e)e.hasOwnProperty(i)&&(n(e[i])?n(t[i])?s(t[i],e[i]):t[i]=Object.assign({},e[i]):t[i]=e[i])}return t instanceof Object||(t={}),s(t,e),i&&s(t,i),t},EventDispatcher:function(t){var e=document.createTextNode(\"\");this.off=function(t,i){return i&&e.removeEventListener.call(e,t,i),this},this.on=function(t,i){return i&&e.addEventListener.call(e,t,i),this},this.trigger=function(i,n){var s;if(i)if(t.settings.isJQueryPlugin)$(t.DOM.originalInput).triggerHandler(i,[n]);else{try{s=new CustomEvent(i,{detail:n})}catch(i){console.warn(i)}e.dispatchEvent(s)}}},events:{customBinding:function(){var t=this;this.customEventsList.forEach(function(e){t.on(e,t.settings.callbacks[e])})},binding:function(t){var e,i=!(0<arguments.length&&void 0!==t)||t,n=this.events.callbacks,s=i?\"addEventListener\":\"removeEventListener\";for(var a in i&&!this.listeners.main&&(this.DOM.input.addEventListener(this.isIE?\"keydown\":\"input\",n[this.isIE?\"onInputIE\":\"onInput\"].bind(this)),this.settings.isJQueryPlugin&&$(this.DOM.originalInput).on(\"tagify.removeAllTags\",this.removeAllTags.bind(this))),e=this.listeners.main=this.listeners.main||{paste:[\"input\",n.onPaste.bind(this)],focus:[\"input\",n.onFocusBlur.bind(this)],blur:[\"input\",n.onFocusBlur.bind(this)],keydown:[\"input\",n.onKeydown.bind(this)],click:[\"scope\",n.onClickScope.bind(this)],dblclick:[\"scope\",n.onDoubleClickScope.bind(this)]})this.DOM[e[a][0]][s](a,e[a][1])},callbacks:{onFocusBlur:function(t){var e=t.target.textContent.trim();\"mix\"!=this.settings.mode&&(\"focus\"==t.type?(this.DOM.scope.classList.add(\"tagify--focus\"),0===this.settings.dropdown.enabled&&this.dropdown.show.call(this)):\"blur\"==t.type?(this.DOM.scope.classList.remove(\"tagify--focus\"),e&&this.settings.addTagOnBlur&&this.addTags(e,!0).length):(this.DOM.input.removeAttribute(\"style\"),this.dropdown.hide.call(this)))},onKeydown:function(t){var e,i=this,n=t.target.textContent;if(\"mix\"==this.settings.mode){switch(t.key){case\"Delete\":case\"Backspace\":var s=[];e=this.DOM.input.children,setTimeout(function(){[].forEach.call(e,function(t){return s.push(t.getAttribute(\"value\"))}),i.value=i.value.filter(function(t){return-1!=s.indexOf(t.value)})},20);break;case\"Enter\":t.preventDefault()}return!0}switch(t.key){case\"Backspace\":\"\"!=n&&8203!=n.charCodeAt(0)||(!0===this.settings.backspace?this.removeTag():\"edit\"==this.settings.backspace&&this.editTag());break;case\"Esc\":case\"Escape\":this.input.set.call(this),t.target.blur();break;case\"ArrowRight\":case\"Tab\":if(!n)return!0;case\"Enter\":t.preventDefault(),this.addTags(this.input.value||n,!0)}},onInput:function(t){var e=this.input.normalize.call(this),i=e.length>=this.settings.dropdown.enabled,n={value:e,inputElm:this.DOM.input};if(\"mix\"==this.settings.mode)return this.events.callbacks.onMixTagsInput.call(this,t);e?this.input.value!=e&&(n.isValid=this.validateTag.call(this,e),this.input.set.call(this,e,!1),this.trigger(\"input\",n),-1!=e.search(this.settings.delimiters)?this.addTags(e).length&&this.input.set.call(this):0<=this.settings.dropdown.enabled&&this.dropdown[i?\"show\":\"hide\"].call(this,e)):this.input.set.call(this,\"\")},onMixTagsInput:function(t){var e,i,n,s,a;if(this.maxTagsReached())return!0;window.getSelection&&0<(e=window.getSelection()).rangeCount&&((i=e.getRangeAt(0).cloneRange()).collapse(!0),i.setStart(window.getSelection().focusNode,0),(s=(n=i.toString().split(this.settings.mixTagsAllowedAfter))[n.length-1].match(this.settings.pattern))&&(this.state.tag={prefix:s[0],value:s.input.split(s[0])[1]},s=this.state.tag,a=this.state.tag.value.length>=this.settings.dropdown.enabled)),this.update(),this.trigger(\"input\",this.extend({},this.state.tag,{textContent:this.DOM.input.textContent})),this.state.tag&&this.dropdown[a?\"show\":\"hide\"].call(this,this.state.tag.value)},onInputIE:function(t){var e=this;setTimeout(function(){e.events.callbacks.onInput.call(e,t)})},onPaste:function(t){},onClickScope:function(t){var e,i=t.target.closest(\"tag\");\"TAGS\"==t.target.tagName?this.DOM.input.focus():\"X\"==t.target.tagName?this.removeTag(t.target.parentNode):i&&(e=this.getNodeIndex(i),this.trigger(\"click\",{tag:i,index:e,data:this.value[e]}))},onEditTagInput:function(t){var e=t.closest(\"tag\"),i=this.getNodeIndex(e),n=this.input.normalize(t),s=n.toLowerCase()==t.originalValue.toLowerCase()||this.validateTag(n);e.classList.toggle(\"tagify--invalid\",!0!==s),e.isValid=s,this.trigger(\"input\",{tag:e,index:i,data:this.extend({},this.value[i],{newValue:n})})},onEditTagBlur:function(t){var e,n=t.closest(\"tag\"),s=this.getNodeIndex(n),a=this.input.normalize(t)||t.originalValue,o=this.input.normalize(t)!=t.originalValue,r=n.isValid,l=i({},this.value[s],{value:a});o&&(this.settings.transformTag.call(this,l),r=this.validateTag(l.value)),void 0!==r&&!0!==r||(t.textContent=l.value,this.value[s].value=l.value,this.update(),(e=t.cloneNode(!0)).removeAttribute(\"contenteditable\"),n.title=l.value,n.classList.remove(\"tagify--editable\"),t.parentNode.replaceChild(e,t),this.trigger(\"edit\",{tag:n,index:s,data:this.value[s]}))},onEditTagkeydown:function(t){switch(t.key){case\"Esc\":case\"Escape\":t.target.textContent=t.target.originalValue;case\"Enter\":case\"Tab\":t.preventDefault(),t.target.blur()}},onDoubleClickScope:function(t){var e=t.target.closest(\"tag\"),i=this.settings,n=e.classList.contains(\"tagify--editable\"),s=e.hasAttribute(\"readonly\");\"mix\"==i.mode||i.readonly||i.enforceWhitelist||!e||n||s||this.editTag(e)}}},editTag:function(t){var e=this,i=0<arguments.length&&void 0!==t?t:this.getLastTag(),n=i.querySelector(\".tagify__tag-text\"),s=this.events.callbacks;n?(i.classList.add(\"tagify--editable\"),n.originalValue=n.textContent,n.setAttribute(\"contenteditable\",!0),n.addEventListener(\"blur\",s.onEditTagBlur.bind(this,n)),n.addEventListener(\"input\",s.onEditTagInput.bind(this,n)),n.addEventListener(\"keydown\",function(t){return s.onEditTagkeydown.call(e,t)}),n.focus()):console.warn(\"Cannot find element in Tag template: \",\".tagify__tag-text\")},input:{value:\"\",set:function(t,e){var i=0<arguments.length&&void 0!==t?t:\"\",n=!(1<arguments.length&&void 0!==e)||e;this.input.value=i,n&&(this.DOM.input.innerHTML=i),i||this.dropdown.hide.call(this),i.length<2&&this.input.autocomplete.suggest.call(this,\"\"),this.input.validate.call(this)},setRangeAtStartEnd:function(t,e){var i,n,s=0<arguments.length&&void 0!==t&&t,a=1<arguments.length?e:void 0;document.createRange&&((i=document.createRange()).selectNodeContents(a||this.DOM.input),i.collapse(s),(n=window.getSelection()).removeAllRanges(),n.addRange(i))},validate:function(){var t=!this.input.value||this.validateTag.call(this,this.input.value);this.DOM.input.classList.toggle(\"tagify__input--invalid\",!0!==t)},normalize:function(t){var e=(0<arguments.length&&void 0!==t?t:this.DOM.input).innerText;return\"settings\"in this&&this.settings.delimiters&&(e=e.replace(/(?:\\r\\n|\\r|\\n)/g,this.settings.delimiters.source.charAt(1))),e.replace(/\\s/g,\" \").replace(/^\\s+/,\"\")},autocomplete:{suggest:function(t){t&&this.input.value?this.DOM.input.setAttribute(\"data-suggest\",t.substring(this.input.value.length)):this.DOM.input.removeAttribute(\"data-suggest\")},set:function(t){var e=this.DOM.input.getAttribute(\"data-suggest\"),i=t||(e?this.input.value+e:null);return!!i&&(this.input.set.call(this,i),this.input.autocomplete.suggest.call(this,\"\"),this.dropdown.hide.call(this),this.input.setRangeAtStartEnd.call(this),!0)}}},getNodeIndex:function(t){var e=0;if(t)for(;t=t.previousElementSibling;)e++;return e},getTagElms:function(){return this.DOM.scope.querySelectorAll(\"tag\")},getLastTag:function(){var t=this.DOM.scope.querySelectorAll(\"tag:not(.tagify--hide):not([readonly])\");return t[t.length-1]},isTagDuplicate:function(t){return this.value.findIndex(function(e){return t.trim().toLowerCase()===e.value.toLowerCase()})},getTagIndexByValue:function(t){var e=[];return this.getTagElms().forEach(function(i,n){i.textContent.trim().toLowerCase()==t.toLowerCase()&&e.push(n)}),e},getTagElmByValue:function(t){var e=this.getTagIndexByValue(t)[0];return this.getTagElms()[e]},markTagByValue:function(t,e){return!!(e=e||this.getTagElmByValue(t))&&(e.classList.add(\"tagify--mark\"),e)},isTagBlacklisted:function(t){return t=t.toLowerCase().trim(),this.settings.blacklist.filter(function(e){return t==e.toLowerCase()}).length},isTagWhitelisted:function(t){return this.settings.whitelist.some(function(e){if((e.value||e).toLowerCase()===t.toLowerCase())return!0})},validateTag:function(t){var e=t.trim(),i=!0;return e?this.settings.pattern&&!this.settings.pattern.test(e)?i=this.TEXTS.pattern:this.settings.duplicates||-1===this.isTagDuplicate(e)?(this.isTagBlacklisted(e)||this.settings.enforceWhitelist&&!this.isTagWhitelisted(e))&&(i=this.TEXTS.notAllowed):i=this.TEXTS.duplicate:i=this.TEXTS.empty,i},maxTagsReached:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},normalizeTags:function(e){function n(t){return t.split(r).filter(function(t){return t}).map(function(t){return{value:t.trim()}})}var s,a=this.settings,o=a.whitelist,r=a.delimiters,l=a.mode,c=!!o&&o[0]instanceof Object,u=e instanceof Array&&e[0]instanceof Object&&\"value\"in e[0],d=[];if(u)return(s=[]).concat.apply(s,t(e.map(function(t){return n(t.value).map(function(e){return i({},t,{},e)})})));if(\"number\"==typeof e&&(e=e.toString()),\"string\"==typeof e){if(!e.trim())return[];e=n(e)}else if(!u&&e instanceof Array){var h;e=(h=[]).concat.apply(h,t(e.map(function(t){return n(t)})))}return c&&(e.forEach(function(t){var e=o.filter(function(e){return e.value.toLowerCase()==t.value.toLowerCase()});e[0]?d.push(e[0]):\"mix\"!=l&&d.push(t)}),e=d),e},parseMixTags:function(t){for(var e,i,n=!1,s=\"\",a=t,o=0;o<t.length;o++)\"[\"==t[o]&&t[o]==t[o+1]&&(n=!0),n&&(s+=t[o]),\"]\"==t[o]&&t[o]==t[o-1]&&(n=!1,e=s.slice(2).slice(0,-2),this.isTagWhitelisted(e)&&!this.settings.duplicates&&-1==this.isTagDuplicate(e)&&(i=this.normalizeTags.call(this,e)[0],a=this.replaceMixStringWithTag(a,s,i).html),s=\"\");return this.DOM.input.innerHTML=a,this.update(),t},replaceMixStringWithTag:function(t,e,i,n){return i&&t&&-1!=t.indexOf(e)&&(n=this.createTagElem(i),this.value.push(i),t=t.replace(e,n.outerHTML+\"&#8288;\")),{html:t,tagElm:n}},addMixTag:function(t){if(t&&this.state.tag){for(var e,i,n,s,a=this.state.tag.prefix+this.state.tag.value,o=document.createNodeIterator(this.DOM.input,NodeFilter.SHOW_TEXT),r=100;(e=o.nextNode())&&r--;)if(e.nodeType===Node.TEXT_NODE){if(-1==(n=e.nodeValue.indexOf(a)))continue;s=e.splitText(n),this.settings.transformTag.call(this,t),i=this.createTagElem(t),s.nodeValue=s.nodeValue.replace(a,\"\"),e.parentNode.insertBefore(i,s),i.insertAdjacentHTML(\"afterend\",\"&#8288;\")}i&&(this.value.push(t),this.update(),this.trigger(\"add\",this.extend({},{index:this.value.length,tag:i},t))),this.state.tag=null}},addTags:function(t,e,i){var n=this,s=2<arguments.length&&void 0!==i?i:this.settings.skipInvalid,a=[];return t&&t.length?(t=this.normalizeTags.call(this,t),\"mix\"==this.settings.mode?this.addMixTag(t[0]):(this.DOM.input.removeAttribute(\"style\"),t.forEach(function(t){var e,i,o={};if(t=Object.assign({},t),n.settings.transformTag.call(n,t),!0!==(e=n.maxTagsReached()||n.validateTag.call(n,t.value))){if(s)return;o[\"aria-invalid\"]=!0,o.class=(t.class||\"\")+\" tagify--notAllowed\",o.title=e,n.markTagByValue(t.value),n.trigger(\"invalid\",{data:t,index:n.value.length,message:e})}o.role=\"tag\",t.readonly&&(o[\"aria-readonly\"]=!0),i=n.createTagElem(n.extend({},t,o)),a.push(i),function(t){var e=this.DOM.scope.lastElementChild;e===this.DOM.input?this.DOM.scope.insertBefore(t,e):this.DOM.scope.appendChild(t)}.call(n,i),!0===e?(n.value.push(t),n.update(),n.trigger(\"add\",{tag:i,index:n.value.length-1,data:t})):n.settings.keepInvalidTags||setTimeout(function(){n.removeTag(i,!0)},1e3)}),t.length&&e&&this.input.set.call(this),a)):(console.warn(\"[addTags]\",\"no tags to add:\",t),a)},minify:function(t){return t.replace(new RegExp(\">[\\r\\n ]+<\",\"g\"),\"><\")},createTagElem:function(t){var e=this.escapeHTML(t.value),i=this.settings.templates.tag.call(this,e,t);return this.settings.readonly&&(t.readonly=!0),i=this.minify(i),this.parseHTML(i)},removeTag:function(t,e,i){var n=0<arguments.length&&void 0!==t?t:this.getLastTag(),s=1<arguments.length?e:void 0,a=2<arguments.length&&void 0!==i?i:250;if(\"string\"==typeof n&&(n=this.getTagElmByValue(n)),n instanceof HTMLElement){var o,r=this.getNodeIndex(n);a&&10<a?(n.style.width=parseFloat(window.getComputedStyle(n).width)+\"px\",document.body.clientTop,n.classList.add(\"tagify--hide\"),setTimeout(l,400)):l(),s||(o=this.value.splice(r,1)[0],this.update(),this.trigger(\"remove\",{tag:n,index:r,data:o}),this.dropdown.render.call(this))}function l(){n.parentNode&&n.parentNode.removeChild(n)}},removeAllTags:function(){this.value=[],this.update(),Array.prototype.slice.call(this.getTagElms()).forEach(function(t){return t.parentNode.removeChild(t)})},getAttributes:function(t){if(\"[object Object]\"!=Object.prototype.toString.call(t))return\"\";var e,i,n=Object.keys(t),s=\"\";for(i=n.length;i--;)\"class\"!=(e=n[i])&&t.hasOwnProperty(e)&&(s+=\" \"+e+(t[e]?'=\"'.concat(t[e],'\"'):\"\"));return s},preUpdate:function(){this.DOM.scope.classList.toggle(\"hasMaxTags\",this.value.length>=this.settings.maxTags)},update:function(){this.preUpdate(),this.DOM.originalInput.value=\"mix\"==this.settings.mode?this.getMixedTagsAsString():this.value.length?JSON.stringify(this.value):\"\"},getMixedTagsAsString:function(){var t=\"\";return this.DOM.input.childNodes.forEach(function(e,i){1==e.nodeType?e.classList.contains(\"tagify__tag\")&&(t+=\"[[\"+e.getAttribute(\"value\")+\"]]\"):t+=e.textContent}),t},dropdown:{init:function(){this.DOM.dropdown=this.dropdown.build.call(this)},build:function(){var t=this.settings.dropdown,e=t.position,i=t.classname,n=\"\".concat(\"manual\"==e?\"\":\"tagify__dropdown\",\" \").concat(i).trim(),s='<div class=\"'.concat(n,'\" role=\"menu\"></div>');return this.parseHTML(s)},show:function(t){var e,i=\"manual\"==this.settings.dropdown.position;if(this.settings.whitelist.length){if(this.suggestedListItems=this.dropdown.filterListItems.call(this,t),!this.suggestedListItems.length)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide.call(this);e=this.dropdown.createListHTML.call(this,this.suggestedListItems),this.DOM.dropdown.innerHTML=this.minify(e),this.settings.enforceWhitelist&&!i&&this.dropdown.highlightOption.call(this,this.DOM.dropdown.querySelector(\".tagify__dropdown__item\")),this.DOM.scope.setAttribute(\"aria-expanded\",!0),this.trigger(\"dropdown:show\",this.DOM.dropdown),document.body.contains(this.DOM.dropdown)||(i||(this.dropdown.position.call(this),document.body.appendChild(this.DOM.dropdown),this.events.binding.call(this,!1)),this.dropdown.events.binding.call(this))}},hide:function(t){var e=this.DOM,i=e.scope,n=e.dropdown,s=\"manual\"==this.settings.dropdown.position&&!t;n&&document.body.contains(n)&&!s&&(window.removeEventListener(\"resize\",this.dropdown.position),this.dropdown.events.binding.call(this,!1),this.events.binding.call(this),i.setAttribute(\"aria-expanded\",!1),n.parentNode.removeChild(n),this.trigger(\"dropdown:hide\",n))},render:function(){this.suggestedListItems=this.dropdown.filterListItems.call(this,\"\");var t=this.dropdown.createListHTML.call(this,this.suggestedListItems);this.DOM.dropdown.innerHTML=this.minify(t)},position:function(){var t=this.DOM.scope.getBoundingClientRect();this.DOM.dropdown.style.cssText=\"left: \"+(t.left+window.pageXOffset)+\"px;                                                top: \"+(t.top+t.height-1+window.pageYOffset)+\"px;                                                width: \"+t.width+\"px\"},events:{binding:function(t){var e=!(0<arguments.length&&void 0!==t)||t,i=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this),onKeyDown:this.dropdown.events.callbacks.onKeyDown.bind(this),onMouseOver:this.dropdown.events.callbacks.onMouseOver.bind(this),onClick:this.dropdown.events.callbacks.onClick.bind(this)},n=e?\"addEventListener\":\"removeEventListener\";\"manual\"!=this.settings.dropdown.position&&(window[n](\"resize\",i.position),window[n](\"keydown\",i.onKeyDown)),window[n](\"mousedown\",i.onClick),this.DOM.dropdown[n](\"mouseover\",i.onMouseOver)},callbacks:{onKeyDown:function(t){var e=this,i=this.DOM.dropdown.querySelector(\"[class$='--active']\"),n=i||this.DOM.dropdown.children[0],s=\"\";switch(t.key){case\"ArrowDown\":case\"ArrowUp\":case\"Down\":case\"Up\":t.preventDefault(),n=(n=n&&n[(\"ArrowUp\"==t.key||\"Up\"==t.key?\"previous\":\"next\")+\"ElementSibling\"])||this.DOM.dropdown.children[\"ArrowUp\"==t.key||\"Up\"==t.key?this.DOM.dropdown.children.length-1:0],this.dropdown.highlightOption.call(this,n,!0);break;case\"Escape\":case\"Esc\":this.dropdown.hide.call(this);break;case\"ArrowRight\":case\"Tab\":if(t.preventDefault(),!this.input.autocomplete.set.call(this,n?n.textContent:null))return!1;case\"Enter\":if(t.preventDefault(),i)return s=this.suggestedListItems[this.getNodeIndex(i)]||this.input.value,this.addTags([s],!0),this.dropdown.hide.call(this),setTimeout(function(){return e.DOM.input.focus()},100),!1;this.addTags(this.input.value,!0)}},onMouseOver:function(t){t.target.className.includes(\"__item\")&&this.dropdown.highlightOption.call(this,t.target)},onClick:function(t){var e,i,n=this;0==t.button&&t.target!=this.DOM.dropdown&&((i=t.target.closest(\".tagify__dropdown__item\"))&&(e=this.suggestedListItems[this.getNodeIndex(i)]||this.input.value,this.addTags([e],!0),setTimeout(function(){return n.DOM.input.focus()},100)),this.dropdown.hide.call(this))}}},highlightOption:function(t,e){if(t){var i,n=\"tagify__dropdown__item--active\";this.DOM.dropdown.querySelectorAll(\"[class$='--active']\").forEach(function(t){t.classList.remove(n),t.removeAttribute(\"aria-selected\")}),t.classList.add(n),t.setAttribute(\"aria-selected\",!0),e&&(t.parentNode.scrollTop=t.clientHeight+t.offsetTop-t.parentNode.clientHeight),this.settings.autoComplete&&!this.settings.dropdown.fuzzySearch&&(i=this.suggestedListItems[this.getNodeIndex(t)].value||this.input.value,this.input.autocomplete.suggest.call(this,i))}},filterListItems:function(t){var e,i,n,s,a=this,o=[],r=this.settings.whitelist,l=this.settings.dropdown.maxItems||1/0,c=0;if(!t)return r.filter(function(t){return-1==a.isTagDuplicate(t.value||t)}).slice(0,l);for(;c<r.length&&(n=(((e=r[c]instanceof Object?r[c]:{value:r[c]}).searchBy||\"\")+\" \"+e.value).toLowerCase().indexOf(t.toLowerCase()),i=this.settings.dropdown.fuzzySearch?0<=n:0==n,s=!this.settings.duplicates&&-1<this.isTagDuplicate(e.value),i&&!s&&l--&&o.push(e),0!=l);c++);return o},createListHTML:function(t){var e=this.settings.templates.dropdownItem.bind(this);return t.map(e).join(\"\")}}},s})?n.apply(e,s):n)||(t.exports=a)},function(t,e,i){var n={\"./skrw_flashes_controller.js\":4,\"./skrw_form_controller.js\":5,\"./skrw_hello_controller.js\":6,\"./skrw_nested_form_controller.js\":7,\"./skrw_session_controller.js\":8,\"./skrw_tags_controller.js\":9};function s(t){var e=a(t);return i(e)}function a(t){if(!i.o(n,t)){var e=new Error(\"Cannot find module '\"+t+\"'\");throw e.code=\"MODULE_NOT_FOUND\",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=a,t.exports=s,s.id=3},function(t,e,i){\"use strict\";i.r(e);var n=i(0);e.default=class extends n.Controller{connect(){this.timeout()}timeout(){this.timeout=window.setTimeout(()=>{this.element.parentNode.removeChild(this.element)},this.timeoutDelay)}get timeoutDelay(){return 3e3}}},function(t,e,i){\"use strict\";i.r(e);var n=i(0),s=i(1),a=i.n(s);e.default=class extends n.Controller{connect(){this.textareas=this.element.querySelectorAll(\"textarea\"),this.textareas.length>0&&a()(this.textareas)}disconnect(){this.textareas.length>0&&a.a.destroy(this.textareas)}}},function(t,e,i){\"use strict\";i.r(e);var n=i(0);e.default=class extends n.Controller{connect(){console.log(\"hello from\",this.element)}}},function(t,e,i){\"use strict\";i.r(e),i.d(e,\"default\",function(){return s});var n=i(0);class s extends n.Controller{add(t){t.preventDefault();const e=this.templateTarget.innerHTML.replace(/NEW_RECORD/g,(new Date).getTime());t.target.insertAdjacentHTML(\"beforebegin\",e)}remove(t){t.preventDefault();const e=t.target.parentNode;e.querySelector(\"input[name*='_destroy']\").value=1,e.style.display=\"none\",t.target.parentNode.removeChild(t.target)}}s.targets=[\"template\"]},function(t,e,i){\"use strict\";i.r(e);var n=i(0);e.default=class extends n.Controller{connect(){this.loggedIn&&this.element.classList.add(this.minClass)}toggle(){this.element.classList.toggle(this.minClass)}get minClass(){return\"skrw-session--min\"}get loggedIn(){return\"true\"==this.data.get(\"loggedIn\")}}},function(t,e,i){\"use strict\";i.r(e);var n=i(0),s=i(2),a=i.n(s);e.default=class extends n.Controller{connect(){console.log(\"connect tags controller\",this.element);let t={enforceWhitelist:this.enforceWhitelist,dropdown:{enabled:1}};this.whitelistUrl?this.fetchWhitelist().then(e=>{t.whitelist=e,console.log(e),this.init(t)}):(t.whitelist=this.whitelist?this.whitelist:[],this.init(t))}init(t){this.tagify=new a.a(this.element,t),this.formatInput(),this.tagify.on(\"add\",t=>{this.formatInput()}).on(\"remove\",t=>{this.formatInput()})}formatInput(){const t=this.tagify.value.map(t=>t.value).join(\", \");this.element.value=t}async fetchWhitelist(){const t=this.whitelistUrl,e=await fetch(t);return await e.json()}get whitelist(){return!!this.data.has(\"whitelist\")&&this.data.get(\"whitelist\")}get whitelistUrl(){return!!this.data.has(\"url\")&&this.data.get(\"url\")}get enforceWhitelist(){return\"true\"==this.data.get(\"enforceWhitelist\")}}},function(t,e,i){\"use strict\";i.r(e);const n=i(0).Application.start(),s=i(3);n.load(function(t){return t.keys().map(function(e){return function(t,e){var i=function(t){var e=(t.match(/^(?:\\.\\/)?(.+)(?:[_-]controller\\..+?)$/)||[])[1];if(e)return e.replace(/_/g,\"-\").replace(/\\//g,\"--\")}(e);if(i)return function(t,e){var i=t.default;if(\"function\"==typeof i)return{identifier:e,controllerConstructor:i}}(t(e),i)}(t,e)}).filter(function(t){return t})}(s))}])});","extractedComments":[]}